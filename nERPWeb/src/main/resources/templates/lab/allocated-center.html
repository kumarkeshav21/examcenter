<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/master}">

<head>

<style type="text/css">
body {
	background: #f5f5f5;
}

.content-wrapper {
	background: transparent;
	padding: .75rem 2.25rem;
}

.table thead th {
	vertical-align: bottom;
	border-bottom: 1px solid #dee2e6;
	background: transparent;
	font-size: 18px !important;
	color: #757373;
	text-align: center;
	font-weight: 100;
	font-family: 'BOLD';
	letter-spacing: .5px;
}

.btnDisable {
	color: #ccc !important;
}

.card-body a {
	color: #000;
}

.highcharts-axis-title {
	display: none;
}
/*todaychanges*/
.card {
	margin: 8px 0px;
}

.smlbox {
	border: 1px solid #ccc;
	background: #FFF;
	border-radius: 5px;
	padding: 10px;
	margin: 5px;
	color: #333;
}

.smlbox1 {
	border: 1px solid #ccc;
	background: #FFF;
	border-radius: 5px;
	padding: 10px;
	margin: 11.5px 0px;
	color: #333;
}

.smlbox11 {
	border-radius: 5px;
	padding: 10px;
	color: #0071c1;
}

.smlbox11 .title {
	width: 100px !important;
	color: #000;
	float: left;
}

.smlbox2 {
	background: transparent;
	border-radius: 5px;
	padding: 5px 10px;
	margin: 5px 0px;
	color: #FFF;
}

.smlbox2 span {
	float: right;
	text-align: right;
}

.mrt_5 {
	margin-top: 8px;
}

.text-left {
	color: #0071c1;
}

.padding_8 {
	padding: 0px 8px;
}

.heading {
	background: rgba(0, 0, 0, 0.5);
	padding: 8px;
}

.card_light {
	background: #FFF;
	border: 1px solid #ccc;
	padding: 10px;
	border-radius: 10px;
}

.card_light .card-title {
	background: #0071c1;
	color: #FFF;
	padding: 12px 10px;
	margin-bottom: 18px;
}

.cardtitle1 {
	/*background: #0071c1;*/
	font-size: 16px;
	color: #333;
	padding-top: 10px;
	padding-left: 10px;
}

.card_light p {
	color: #ccc;
}

.card {
	margin: 0 !important;
	margin-bottom: 8px !important;
}

/*new*/
.searchsec {
	background: #dbdbdb;
	height: 60px;
	border-bottom: 3px solid #7bd4df;
	padding: 5px;
	width: 100%;
	margin: 0px 5px;
}

.card-title {
	padding: 10px 3px;
	color: #333 !important;
	font-size: 18px;
}

.highcharts-figure {
	width: 100% !important;
	margin: 0 !important;
}

.highcharts-drilldown-data-label text {
	text-decoration: none !important;
	color: #FFF !important;
	fill: #FFF !important;
}

.padding_5 {
	padding: 0px 5px;
}

.d-block {
	display: block !important;
	width: 100%;
}

.card-body {
	padding: 0.5rem 0.5rem;
	text-align: left;
}

.highcharts-xaxis-labels text {
	color: #333 !important;
	fill: #333 !important;
}

.highcharts-yaxis-labels text {
	color: #333 !important;
	fill: #333 !important;
}

#sundargarh {
	height: 500px;
	min-width: 310px;
	max-width: 800px;
	margin: 0 auto;
}

.loading {
	margin-top: 10em;
	text-align: center;
	color: gray;
}

#area {
	height: 200px;
	position: relative;
	right: 20px;
	width: 300px;
}

.highcharts-a11y-proxy-button {
	color: #333 !important;
}

#daywise {
	height: 150px;
	width: 150px;
	position: relative;
	right: 40px;
}

#daywise .highcharts-yaxis-labels {
	display: none;
}

#chart .highcharts-a11y-proxy-button {
	color: #333 !important;
}

.white {
	color: #FFF;
}

/* .active {
	background: #98cb4a;
	border: 1px solid #FFF;
} */
.inactive {
	background: #f76d3c;
	color: #333;
	border: 1px solid #FFF;
}

.inactive a {
	color: #FFF;
}

.ulbar {
	display: flex;
	flex-wrap: wrap;
	margin-right: -15px;
	margin-left: -15px;
	margin-bottom: 8px;
}

.card a {
	color: #98cb4a;
	padding: 0px 7px;
	position: relative;
	top: 10px;
	right: 10px;
}

.boxicon {
	position: absolute;
	bottom: 8px;
	right: 8px;
}

.card-body a {
	color: #FFF !important;
	padding: 16px;
	width: 100%;
	position: relative;
	top: -20px;
	left: 0px;
}

.card-body a .icon {
	position: relative;
	top: -20px;
}

.font-weight-normal {
	font-family: "ubuntu-regular", sans-serif;
	font-size: 16px;
}

.profile {
	border: 2px solid #ccc;
	border-radius: 80px;
	height: 104px;
	width: 104px;
	position: relative;
	left: 33%;
}

.profile img {
	height: 100px;
	width: 100px;
	border-radius: 50%;
}

.edit {
	position: absolute;
	background: #0071c1;
	height: 30px;
	width: 30px;
	border-radius: 20px;
	color: #FFF;
	right: 0;
	bottom: 0px;
	padding: 3px 8px;
}

.card-title2 {
	padding: 10px 3px;
	color: #333 !important;
	font-size: 18px;
	font-weight: 500;
}

.card-dsn {
	box-shadow: 0 1px 6px 0 rgb(32 33 36/ 28%);
	height: 315px;
	border-bottom: 5px solid #913ccd;
	border-radius: 5px;
	overflow-y: scroll;
	overflow-x: hidden;
}

.card-emergency {
	box-shadow: 0 1px 6px 0 rgb(32 33 36/ 28%);
	height: 130px;
	border-bottom: 5px solid #f2b40c;
	border-radius: 5px;
}

.card-family {
	box-shadow: 0 1px 6px 0 rgb(32 33 36/ 28%);
	height: 130px;
	border-bottom: 5px solid #f15f74;
	border-radius: 5px;
}

.card-profile {
	box-shadow: 0 1px 6px 0 rgb(32 33 36/ 28%);
	border-bottom: 5px solid #3000c6;
	border-radius: 5px;
}

.mt-8 {
	margin-top: 8px;
}

.mb-20 {
	margin-bottom: 20px;
}

.tbl-card {
	background-color: #fff;
	border-radius: 5px;
	border-bottom: 5px solid #2ca8c2;
	margin-bottom: 30px;
	box-shadow: 0 1px 6px 0 rgb(32 33 36/ 28%);
	height: 315px;
}

.tbl-head {
	font-size: 18px;
	color: #fff;
	background-color: #2ca8c2;
	padding: 5px 10px;
	border-radius: 5px 5px 0px 0px;
}

.table thead th {
	border: none;
}

.table td, .table th {
	border-top: none;
	font-family: 'HelveticaNeue';
	font-size: 16px;
	font-weight: 100;
}

.inr-tbl {
	padding: 10px;
}

.date-clnd {
	border: 1px solid #2d9f9e;
	border-radius: 7px;
	text-align: center;
	background-color: #fff;
	font-weight: 700;
	color: #000;
}

.btm-txt {
	background-color: #2d9f9e;
	border-radius: 0px 0px 7px 7px;
	color: #fff;
	font-weight: 500;
}

.disble-clnd {
	border: 1px solid #cacaca;
	border-radius: 7px;
	text-align: center;
	background-color: #fff;
	font-weight: 700;
	color: #000;
}

.disble-txt {
	background-color: #cacaca;
	border-radius: 0px 0px 7px 7px;
	font-weight: 500;
}

.rlt-nm {
	font-size: 16px;
	color: #000;
	border-right: 2px solid #000;
	width: 165px;
	float: left;
}

.rlt {
	font-size: 16px;
	color: #000;
	margin-left: 10px;
}

.ph-no {
	font-size: 16px;
	color: #000;
}

.ph-no span {
	color: #056fe2;
}

.d-flex {
	display: flex;
}

.user-dtlhd {
	font-size: 16px;
	color: #000;
	font-weight: 500;
}

.user-id {
	font-size: 16px;
	font-weight: 400;
	color: #056fe2;
}

.mb-10 {
	margin-bottom: 10px;
}

.mdtbl-scrl {
	height: 400px;
	overflow-y: scroll;
}

.tbl-scrl {
	height: 380px;
	overflow-y: scroll;
}

.since-txt {
	font-size: 16px;
	color: #000;
}

.since-txt span {
	font-size: 16px;
	color: #000;
	margin-left: 10px;
}

.more {
	text-align: right;
	font-size: 16px;
	color: #000;
	margin-right: 20px;
	margin-bottom: 8px;
}

.rpt-nm {
	font-size: 16px;
	color: #000;
}

.lab-name {
	font-size: 16px;
	color: #056fe2;
}

.btn-book {
	color: #fff;
	background-color: #3000c6;
	border-color: #3000c6;
}

.btn-book:hover {
	color: #fff;
	background-color: #5129ce;
	border-color: #5129ce;
}

.prf-ht {
	height: 600px;
}

.mecication-head {
	font-size: 18px;
	color: #fff;
	background-color: #117a75;
	padding: 5px 10px;
	border-radius: 5px 5px 0px 0px;
}

.md-tbl td, .md-tbl th {
	padding: 6px 5px;
}

.md-tbl td {
	color: #056fe2;
	font-size: 16px;
}

.mecication-card {
	background-color: #fff;
	border-radius: 5px;
	border-bottom: 5px solid #117a75;
	margin-bottom: 30px;
	box-shadow: 0 1px 6px 0 rgb(32 33 36/ 28%);
	height: 454px;
	margin-top: -30px;
}

.mb-8 {
	margin-bottom: 8px;
}

.grn-btn {
	background: #00a330;
	color: #FFF;
	border: none;
	outline: none;
	cursor: pointer;
	border-radius: 30px;
	padding: 4px 10px 4px 10px;
	text-decoration: none;
	font-family: roboto;
}

#hideTbl{
width:50px;
}
</style>
<script>

//Document Upload Ends

	function saveAddress() {
		
		$('#myGrid').empty();
		var locationType = $("#locationName").val();
		var centerType = $("#centerType").val();
		
					
		var gridDiv = document.querySelector('#myGrid');
		new agGrid.Grid(gridDiv, gridOptions);
	
		var rowData = [];
		gridOptions.api.setRowData(rowData);
		
		var pages;
	 	var pageno=1;
		 agGrid.simpleHttpRequest({
				url : "allocated-center-view?loc="+locationType+"&cent=" + centerType,
			}).then(function(data) {
				var len = data.length;
				$('#totalCandidate').find('span').html(len);
				gridOptions.api.setRowData(data);
				//window.location.reload(true);
				if(data.length > 0) {
					$('#totalPageno').val(data[0].totalPageno);
					pages=data[0].totalPageno;
					
				}
				createPagination(pages, pageno);
			}); 
		 
	}

	var columnDefs = [
		{
			headerCheckboxSelection : true,
			checkboxSelection : true,
			width : 10,
			sortable : false,
			filter : false,
			resizable : true
		},{
			headerName : "Application No.",
			field : "appNumber",
			width: 250
		},{
			headerName : "Name",
			field : "candiName",
			width: 250
		},{
			headerName :"Center-1",
			field : "firstCenter",
			width: 250
		},{
			headerName : "Center-2",
			field : "secondCenter",
			width: 250
		},{
			headerName : "Center-3",
			field : "thirdCenter",
			width: 250
		},{
			headerName : "Allocated Center",
			field : "alloCenter",
			width: 250
		
		}];			
	var gridOptions = {
			columnDefs : columnDefs,
			//rowData: rowData,
			defaultColDef : {
				sortable : true,
				filter : true,
				resizable : true,
				width : 700.5,
			},
			rowSelection : 'multiple',
			suppressRowClickSelection : true,	
		};
	
	
	
	function getCenterName(){
		
		
		var loType = $("#locationName").val();
		
		if (loType) {
			$("#centerType").empty();
			$.ajax({
				type : 'GET',
				url : 'center-allocation-report-get-center?name=' + loType,
				contentType : false,
				success : function(response) {
					if (response.message == "success") {
						for (var i = 0; i < response.body.length; i++) {
							var option = $("<option></option>");
							$(option).val(response.body[i].key);
							$(option).html(response.body[i].name);
							$("#centerType").append(option);
							
						}
					}
				},
				error : function(e) {

				}
			});
		} else {
			$("#centerType").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			$("#centerType").append(option);

		}
		
	}
	

	
	/* ******************************************** */
	
	
	

	
	
	function printDoc() {
		//console.log("Exporting to PDF...");
		const docDefinition = getDocDefinition(
	    	printParams, 
	    	gridOptions.api, 
	    	gridOptions.columnApi
		);
		pdfMake.createPdf(docDefinition).download();
	}
	
	/* -------------------search bar for mygrid------------------------ */

	function onQuickFilterChanged() {
		gridOptions.api
				.setQuickFilter(document.getElementById('quickFilter').value);
	}

	function cancelBar() {
		var id = document.getElementById("closeKey");
		id.style.display = "block";

		if ($('#quickFilter').val() == null || $('#quickFilter').val() == "") {
			id.style.display = "none";
		}
	}
	
	/* function pdfGatePass(id1,id2) {	
		var id = window.btoa(id1);
		window.open("/lab/view-candidate-pdf?id=" +id+'&id2='+id2 , '_blank');
		//window.open("/user/view-patient-test-report-pdf-download-pdf?id=" +id , '_blank');
	} */
	
	
	
	
	function JobTypeCSV() {
		   var dataset = [];
		   gridOptions.api.forEachNodeAfterFilterAndSort(function(rowNode,
		   index) {
			   var item = rowNode.data;
			   item.jobTypeId = item.jobTypeOrder; 
		   dataset.push(item);
		   });
		   gridOptions.api.exportDataAsCsv(dataset);
		   }
</script>



</head>
<body>
	<div layout:fragment="content" class="maincontent">
		<div class="container-scroller">
			<!-- partial -->
			<div class="container-fluid">
				<!-- partial -->
				<div class="main-panel">
					<div class="content-wrapper">
					
				<!-- ******************************************** -->
					

						<div class="row">
							<div class="col-md-12">

								<div class="row"></div>
								<div class="card">

									<div class="col-md-12">
										<div class="panel-heading active" role="tab" id="headingOne">

										</div>
									</div>
									<div class="col-md-12">



										<div class="card-body">
											<div class="basic-elements"></div>
										</div>

										<table class="table table-striped table-bordered table-hover">

											<tbody>
												<tr>
													<td>Location Name :</td>


													<td><select class="form-control" id="locationName" onclick="getCenterName()">
															<option th:value="NULL">--Select--</option>
															<option th:each="c,iter:${locList}" th:value="${c.key}"
																th:text="${c.name}" th:selected="${c.key==locationName}"></option>

													</select></td>
													<td>Center Name :</td>
													<td><select class="form-control" id="centerType"
														onclick="getCourseName()">
															<option th:value="NULL">--Select Center--</option>
															<option></option>
													</select></td>
													
													
													<td><input type="submit" value="Search for Center Allocation"
												class="btn btn-success" onclick="saveAddress();"></td>

												</tr>
												
											</tbody>
										</table>
										
<!-- 
										<div class="row margin_topbot" id="hideTbl" >
											<div class="input-style row" align="right">
												<input type="text" placeholder="Search.." name="search"
													class="searchboxinput" onkeyup="cancelBar()"
													oninput="onQuickFilterChanged()" id="quickFilter">
												<div class="searchicon">
													<a href="javascript:void(0)"><span style="display: none; border-right: 1px solid #ccc; padding-right: 5px;"
														id="closeKey"
														onclick="gridOptions.api.setQuickFilter(null);$('#quickFilter').val('');document.getElementById('closeKey').style.display='none';"
														class="close_i"><i class="ti-close srchicon"></i></span></a><a href="javascript:void(0)"><i class="ti-search srchicon"></i></a>
												</div>
											</div>
										</div> -->

										<input type="hidden" id="totalPageno">
										<div class="box_reference" align="center" >
											<div id="myGrid" style="width: 100%; height: 700px;"
												class="ag-theme-alpine"></div>
										</div>
									<!-- 	<div id="pagination" style="cursor: pointer;"></div> -->
									

									</div>


								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

</body>
</html>